<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search - SeltzerTracker</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Search Seltzers</h1>
        </div>

        <div class="content">
            <div class="search-container">
                <div class="search-bar">
                    <div class="search-icon">🔍</div>
                    <input type="text" id="searchInput" class="search-input" placeholder="Search by brand, flavor, or notes..." autocomplete="off">
                    <div class="search-suggestions" id="searchSuggestions" style="display: none;"></div>
                </div>

                <div class="search-filters">
                    <button class="filter-chip active" data-filter="all">All</button>
                    <button class="filter-chip" data-filter="brand">Brand</button>
                    <button class="filter-chip" data-filter="flavor">Flavor</button>
                    <button class="filter-chip" data-filter="rating-5">5 Stars</button>
                    <button class="filter-chip" data-filter="rating-4">4+ Stars</button>
                    <button class="filter-chip" data-filter="polar">Polar</button>
                    <button class="filter-chip" data-filter="lacroix">LaCroix</button>
                    <button class="filter-chip" data-filter="spindrift">Spindrift</button>
                </div>

                <div class="search-results" id="searchResults">
                    <div class="results-header">
                        <div class="results-count" id="resultsCount">5 seltzers found</div>
                        <button class="sort-btn" onclick="toggleSort()">Sort by Date ↓</button>
                    </div>

                    <div id="resultsList">
                        <!-- Sample search results -->
                        <div class="search-item" data-brand="polar" data-flavor="lime" data-rating="4">
                            <div class="search-item-content">
                                <div class="seltzer-info">
                                    <h4>Polar Seltzer - <span class="highlight">Lime</span></h4>
                                    <p>2 hours ago</p>
                                </div>
                                <div class="seltzer-rating">★★★★☆</div>
                            </div>
                            <div class="search-actions">
                                <button class="search-action view-action" onclick="viewSeltzer(1)">👁️</button>
                                <button class="search-action edit-action" onclick="editSeltzer(1)">✏️</button>
                                <button class="search-action delete-action" onclick="deleteSeltzer(1)">🗑️</button>
                            </div>
                        </div>

                        <div class="search-item" data-brand="spindrift" data-flavor="lemon" data-rating="5">
                            <div class="search-item-content">
                                <div class="seltzer-info">
                                    <h4>Spindrift - <span class="highlight">Lemon</span></h4>
                                    <p>Yesterday</p>
                                </div>
                                <div class="seltzer-rating">★★★★★</div>
                            </div>
                            <div class="search-actions">
                                <button class="search-action view-action" onclick="viewSeltzer(2)">👁️</button>
                                <button class="search-action edit-action" onclick="editSeltzer(2)">✏️</button>
                                <button class="search-action delete-action" onclick="deleteSeltzer(2)">🗑️</button>
                            </div>
                        </div>

                        <div class="search-item" data-brand="bubly" data-flavor="cherry" data-rating="3">
                            <div class="search-item-content">
                                <div class="seltzer-info">
                                    <h4>Bubly - Cherry</h4>
                                    <p>2 days ago</p>
                                </div>
                                <div class="seltzer-rating">★★★☆☆</div>
                            </div>
                            <div class="search-actions">
                                <button class="search-action view-action" onclick="viewSeltzer(3)">👁️</button>
                                <button class="search-action edit-action" onclick="editSeltzer(3)">✏️</button>
                                <button class="search-action delete-action" onclick="deleteSeltzer(3)">🗑️</button>
                            </div>
                        </div>

                        <div class="search-item" data-brand="lacroix" data-flavor="grapefruit" data-rating="4">
                            <div class="search-item-content">
                                <div class="seltzer-info">
                                    <h4>LaCroix - Grapefruit</h4>
                                    <p>3 days ago</p>
                                </div>
                                <div class="seltzer-rating">★★★★☆</div>
                            </div>
                            <div class="search-actions">
                                <button class="search-action view-action" onclick="viewSeltzer(4)">👁️</button>
                                <button class="search-action edit-action" onclick="editSeltzer(4)">✏️</button>
                                <button class="search-action delete-action" onclick="deleteSeltzer(4)">🗑️</button>
                            </div>
                        </div>

                        <div class="search-item" data-brand="spindrift" data-flavor="orange-mango" data-rating="5">
                            <div class="search-item-content">
                                <div class="seltzer-info">
                                    <h4>Spindrift - Orange Mango</h4>
                                    <p>1 week ago</p>
                                </div>
                                <div class="seltzer-rating">★★★★★</div>
                            </div>
                            <div class="search-actions">
                                <button class="search-action view-action" onclick="viewSeltzer(5)">👁️</button>
                                <button class="search-action edit-action" onclick="editSeltzer(5)">✏️</button>
                                <button class="search-action delete-action" onclick="deleteSeltzer(5)">🗑️</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="noResults" class="no-results" style="display: none;">
                    <div class="no-results-icon">🔍</div>
                    <h3>No seltzers found</h3>
                    <p>Try adjusting your search terms or filters</p>
                </div>
            </div>
        </div>

        <div class="nav-bar">
            <a href="index.html" class="nav-item">
                <div class="nav-icon">🏠</div>
                <div>Home</div>
            </a>
            <a href="log.html" class="nav-item">
                <div class="nav-icon">📝</div>
                <div>Log</div>
            </a>
            <a href="history.html" class="nav-item">
                <div class="nav-icon">📊</div>
                <div>History</div>
            </a>
            <a href="search.html" class="nav-item active">
                <div class="nav-icon">🔍</div>
                <div>Search</div>
            </a>
            <a href="profile.html" class="nav-item">
                <div class="nav-icon">👤</div>
                <div>Profile</div>
            </a>
        </div>
    </div>

    <script>
        let currentQuery = '';
        let currentFilter = 'all';
        let sortOrder = 'date-desc';

        // Sample data for search suggestions
        const suggestions = [
            'Polar Seltzer', 'LaCroix', 'Spindrift', 'Bubly', 'AHA', 'Perrier',
            'Lime', 'Lemon', 'Cherry', 'Grapefruit', 'Orange', 'Mango', 
            'Coconut', 'Pineapple', 'Strawberry', 'Raspberry', 'Cranberry',
            'Black Cherry', 'Vanilla', 'Watermelon', 'Cucumber'
        ];

        // Search functionality
        document.getElementById('searchInput').addEventListener('input', function(e) {
            currentQuery = e.target.value.toLowerCase();
            performSearch();
            showSuggestions();
        });

        function showSuggestions() {
            const input = document.getElementById('searchInput');
            const suggestionsDiv = document.getElementById('searchSuggestions');
            
            if (currentQuery.length < 2) {
                suggestionsDiv.style.display = 'none';
                return;
            }

            const filteredSuggestions = suggestions.filter(s => 
                s.toLowerCase().includes(currentQuery)
            ).slice(0, 5);

            if (filteredSuggestions.length > 0) {
                suggestionsDiv.innerHTML = filteredSuggestions.map(s => 
                    `<div class="suggestion-item" onclick="selectSuggestion('${s}')">${s}</div>`
                ).join('');
                suggestionsDiv.style.display = 'block';
            } else {
                suggestionsDiv.style.display = 'none';
            }
        }

        function selectSuggestion(suggestion) {
            document.getElementById('searchInput').value = suggestion;
            currentQuery = suggestion.toLowerCase();
            document.getElementById('searchSuggestions').style.display = 'none';
            performSearch();
        }

        // Hide suggestions when clicking outside
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.search-bar')) {
                document.getElementById('searchSuggestions').style.display = 'none';
            }
        });

        // Filter functionality
        document.querySelectorAll('.filter-chip').forEach(chip => {
            chip.addEventListener('click', function() {
                document.querySelectorAll('.filter-chip').forEach(c => c.classList.remove('active'));
                this.classList.add('active');
                currentFilter = this.dataset.filter;
                performSearch();
            });
        });

        function performSearch() {
            const items = document.querySelectorAll('.search-item');
            let visibleCount = 0;

            items.forEach(item => {
                const brand = item.dataset.brand.toLowerCase();
                const flavor = item.dataset.flavor.toLowerCase();
                const rating = parseInt(item.dataset.rating);
                let show = true;

                // Text search
                if (currentQuery) {
                    const itemText = `${brand} ${flavor}`.toLowerCase();
                    show = itemText.includes(currentQuery);
                }

                // Filter search
                if (show && currentFilter !== 'all') {
                    switch(currentFilter) {
                        case 'brand':
                            show = brand.includes(currentQuery);
                            break;
                        case 'flavor':
                            show = flavor.includes(currentQuery);
                            break;
                        case 'rating-5':
                            show = rating === 5;
                            break;
                        case 'rating-4':
                            show = rating >= 4;
                            break;
                        case 'polar':
                            show = brand === 'polar';
                            break;
                        case 'lacroix':
                            show = brand === 'lacroix';
                            break;
                        case 'spindrift':
                            show = brand === 'spindrift';
                            break;
                    }
                }

                item.style.display = show ? 'block' : 'none';
                if (show) visibleCount++;
            });

            // Update results count
            document.getElementById('resultsCount').textContent = `${visibleCount} seltzer${visibleCount !== 1 ? 's' : ''} found`;

            // Show/hide no results
            const noResults = document.getElementById('noResults');
            const searchResults = document.getElementById('searchResults');
            
            if (visibleCount === 0) {
                noResults.style.display = 'block';
                searchResults.style.display = 'none';
            } else {
                noResults.style.display = 'none';
                searchResults.style.display = 'block';
            }
        }

        function toggleSort() {
            sortOrder = sortOrder === 'date-desc' ? 'date-asc' : 'date-desc';
            const sortBtn = document.querySelector('.sort-btn');
            sortBtn.textContent = `Sort by Date ${sortOrder === 'date-desc' ? '↓' : '↑'}`;
            // In real implementation, this would actually sort the results
            console.log('Sort order changed to:', sortOrder);
        }

        // Action functions
        function viewSeltzer(id) {
            console.log('View seltzer:', id);
            alert('View functionality will connect to backend later');
        }

        function editSeltzer(id) {
            console.log('Edit seltzer:', id);
            alert('Edit functionality will connect to backend later');
        }

        function deleteSeltzer(id) {
            if (confirm('Are you sure you want to delete this seltzer?')) {
                console.log('Delete seltzer:', id);
                alert('Delete functionality will connect to backend later');
            }
        }
    </script>
</body>
</html>