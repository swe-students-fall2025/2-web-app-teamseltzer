<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Log Seltzer - SeltzerTracker</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <button class="back-btn" onclick="goBack()">‚Üê</button>
            <h1>Log New Seltzer</h1>
        </div>

        <div class="content">
            <div class="form-container">
                <form id="seltzerForm">
                    <div class="form-group">
                        <label class="form-label" for="brand">Brand</label>
                        <select id="brand" class="form-input" required onchange="loadFlavors()">
                            <option value="">Select a brand...</option>
                            <option value="polar">Polar Seltzer</option>
                            <option value="lacroix">LaCroix</option>
                            <option value="spindrift">Spindrift</option>
                            <option value="bubly">Bubly</option>
                            <option value="aha">AHA</option>
                            <option value="perrier">Perrier</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="flavor">Flavor</label>
                        <select id="flavor" class="form-input" required disabled>
                            <option value="">Select a brand first...</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Rating</label>
                        <div class="rating-container">
                            <span class="star" data-rating="1">‚òÖ</span>
                            <span class="star" data-rating="2">‚òÖ</span>
                            <span class="star" data-rating="3">‚òÖ</span>
                            <span class="star" data-rating="4">‚òÖ</span>
                            <span class="star" data-rating="5">‚òÖ</span>
                        </div>
                    </div>

                    <div class="date-time">
                        <div class="form-group">
                            <label class="form-label" for="date">Date</label>
                            <input type="date" id="date" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="time">Time</label>
                            <input type="time" id="time" class="form-input" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="notes">Notes (Optional)</label>
                        <textarea id="notes" class="form-textarea" placeholder="Any additional thoughts about this seltzer..."></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Photo (Optional)</label>
                        <div class="photo-upload" onclick="document.getElementById('photo').click()">
                            <div class="photo-icon">üì∑</div>
                            <div>Tap to add photo</div>
                            <input type="file" id="photo" accept="image/*" style="display: none;">
                        </div>
                    </div>

                    <div class="button-group">
                        <button type="button" class="btn btn-secondary" onclick="goBack()">Cancel</button>
                        <button type="submit" class="btn btn-primary">Save Seltzer</button>
                    </div>
                </form>
            </div>
        </div>

        <div class="nav-bar">
            <a href="index.html" class="nav-item">
                <div class="nav-icon">üè†</div>
                <div>Home</div>
            </a>
            <a href="log.html" class="nav-item active">
                <div class="nav-icon">üìù</div>
                <div>Log</div>
            </a>
            <a href="history.html" class="nav-item">
                <div class="nav-icon">üìä</div>
                <div>History</div>
            </a>
            <a href="search.html" class="nav-item">
                <div class="nav-icon">üîç</div>
                <div>Search</div>
            </a>
            <a href="profile.html" class="nav-item">
                <div class="nav-icon">üë§</div>
                <div>Profile</div>
            </a>
        </div>
    </div>

    <script>
        // Brand-flavor data structure
        const brandFlavors = {
            'polar': ['Lime', 'Lemon', 'Orange', 'Grapefruit', 'Cranberry', 'Raspberry', 'Black Cherry', 'Vanilla'],
            'lacroix': ['Lime', 'Lemon', 'Orange', 'Grapefruit', 'Coconut', 'Pamplemousse', 'Passionfruit', 'Mango'],
            'spindrift': ['Lemon', 'Orange Mango', 'Grapefruit', 'Cranberry Raspberry', 'Cucumber', 'Blackberry'],
            'bubly': ['Lime', 'Lemon', 'Cherry', 'Grapefruit', 'Orange', 'Strawberry', 'Apple', 'Mango'],
            'aha': ['Lime + Watermelon', 'Orange + Grapefruit', 'Strawberry + Cucumber', 'Black Cherry + Coffee'],
            'perrier': ['Original', 'Lime', 'Lemon', 'Grapefruit', 'Green Apple', 'Pink Grapefruit']
        };

        // Set default date and time to now
        const now = new Date();
        document.getElementById('date').value = now.toISOString().split('T')[0];
        document.getElementById('time').value = now.toTimeString().slice(0, 5);

        // Load flavors based on selected brand
        function loadFlavors() {
            const brandSelect = document.getElementById('brand');
            const flavorSelect = document.getElementById('flavor');
            const selectedBrand = brandSelect.value;

            // Clear existing options
            flavorSelect.innerHTML = '<option value="">Select a flavor...</option>';

            if (selectedBrand && brandFlavors[selectedBrand]) {
                // Enable flavor select
                flavorSelect.disabled = false;
                
                // Add flavor options
                brandFlavors[selectedBrand].forEach(flavor => {
                    const option = document.createElement('option');
                    option.value = flavor.toLowerCase().replace(/\s+/g, '-');
                    option.textContent = flavor;
                    flavorSelect.appendChild(option);
                });
            } else {
                // Disable flavor select
                flavorSelect.disabled = true;
                flavorSelect.innerHTML = '<option value="">Select a brand first...</option>';
            }
        }

        // Star rating functionality
        const stars = document.querySelectorAll('.star');
        let currentRating = 0;

        stars.forEach((star, index) => {
            star.addEventListener('click', () => {
                currentRating = index + 1;
                updateStars();
            });

            star.addEventListener('mouseenter', () => {
                highlightStars(index + 1);
            });
        });

        document.querySelector('.rating-container').addEventListener('mouseleave', () => {
            updateStars();
        });

        function highlightStars(rating) {
            stars.forEach((star, index) => {
                star.classList.toggle('active', index < rating);
            });
        }

        function updateStars() {
            highlightStars(currentRating);
        }

        // Form submission
        document.getElementById('seltzerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const brandSelect = document.getElementById('brand');
            const flavorSelect = document.getElementById('flavor');
            
            const formData = {
                brand: brandSelect.options[brandSelect.selectedIndex].text,
                brandId: brandSelect.value,
                flavor: flavorSelect.options[flavorSelect.selectedIndex].text,
                flavorId: flavorSelect.value,
                rating: currentRating,
                date: document.getElementById('date').value,
                time: document.getElementById('time').value,
                notes: document.getElementById('notes').value,
                photo: document.getElementById('photo').files[0]
            };

            console.log('Seltzer review data:', formData);
            alert('Seltzer review logged! (This will connect to backend later)');
            
            // Reset form
            this.reset();
            currentRating = 0;
            updateStars();
            document.getElementById('date').value = new Date().toISOString().split('T')[0];
            document.getElementById('time').value = new Date().toTimeString().slice(0, 5);
            document.getElementById('flavor').disabled = true;
            document.getElementById('flavor').innerHTML = '<option value="">Select a brand first...</option>';
        });

        function goBack() {
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>